{% extends 'main/base.html' %}
{% block title %}Customer Profile{% endblock %}

{% block content %}
<div class="profile-container">
  <h2>Hello, {{ customer.user.username }}</h2>
  <p><strong>Email:</strong> {{ customer.user.email }}</p>
  <p><strong>Date of Birth:</strong> {{ customer.date_of_birth }}</p>

  <h3>Requested Services</h3>

  {% if requested_services %}
    <table class="services-table">
      <thead>
        <tr>
          <th>Service Name</th>
          <th>Hours</th>
          <th>Cost</th>
          <th>Date Requested</th>
          <th>Company</th>
        </tr>
      </thead>
      <tbody>
        {% for request in requested_services %}
        <tr>
          <td>{{ request.service.name }}</td>
          <td>{{ request.hours }}</td>
          <td>{{ request.cost }}</td>
          <td>{{ request.requested_at|date:"Y-m-d" }}</td>
          <td>
            <a href="{% url 'company_profile' name=request.service.company.user.username %}">
              {{ request.service.company.user.username }}
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No services requested yet.</p>
  {% endif %}
</div>
{% endblock %}
